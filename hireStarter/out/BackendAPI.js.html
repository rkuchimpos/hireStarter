<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: BackendAPI.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: BackendAPI.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import UserProfile from '../models/UserProfile';
import BackendLogic from './BackendLogic';

/** Class that handles interfacing with the backend */
class BackendAPI {
    /**
     * Get a list of user profile cards that match the user's profile filter/skills.
     *
     * @param {Integer} numCards the number of filtered cards to be retrieved.
     * @return {Array.&lt;UserProfile>} an array of user profiles of length numCards that match the user's filter.
     */
    static getFilteredCards(numCards) {
        foundCards = 0;
        var filteredCards = [];
        while (foundCards &lt; numCards)
        {
            var unfilteredCards = BackendLogic.fetchCards(numCards);

            myUserCard = this.getMyCard();

            unfilteredCards.forEach(element => {
                // TODO: check if element matches with filter of myUserCard
                // if so:
                filteredCards.push(element);
                foundCards++;
                //else:
                // continue
                console.log("unfiltered foreach");
            });
        }
        return filteredCards;
    }

    /**
     * Get the current user's user profile card, by using a globall stored UID for the session.
     *
     * @return {UserProfile} the user's profile card.
     */
    static getMyCard() {
        // TODO: get locally stored uid
        uid = 1;
        // TODO: implement get card from firebase
        return BackendLogic.fetchCardByUID(uid);
    }

    /**
     * Get a list of user profile cards that the user has matched with mutually.
     *
     * @return {Array.&lt;UserProfile>} an array of user profiles that the user has mutually matched with.
     */
    static getMatchedCards() {
        var matchedUIDs = BackendLogic.getMatchBucketByUID();
        var matchedCards = [];
        matchedUIDs.forEach(element => {
            matchedCards.push(BackendLogic.fetchCardByUID(element));
        });

        //TODO: get rid of this:
        matchedCards = this.getFilteredCards(10);

        return matchedCards;
    }

    /**
     * Retrieve all data relevant to the Card class
     *
     * @param {string} uid The user's unique identifier.
     * @return {Object} A formatted JSON object that describes the user.
     */
    static fetchCards(uid){
        visited = db.collection('users').doc(uid).get('unlikes')
            .concat(
                db.collection('users').doc(uid).get('likes')
            )
        query = db.collection('users').where('id', "!=", visited).limitToLast(30);
    }
}

export default BackendAPI
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BackendAPI.html">BackendAPI</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Nov 14 2019 19:00:09 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
